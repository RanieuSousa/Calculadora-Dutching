<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scanner de Middles Avançado</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        input::placeholder {
            color: #6b7280;
        }
        .tab-btn.active {
            background-color: #9333ea; /* purple-600 */
            color: #ffffff;
        }
        .tab-btn {
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-5xl bg-gray-800 rounded-2xl shadow-2xl border border-gray-700 overflow-hidden">
        
        <div class="text-center p-6 sm:p-8 bg-gray-800">
            <h1 class="text-3xl sm:text-4xl font-bold text-purple-400">Scanner de Middles</h1>
            <p class="text-gray-400 mt-2">Encontre oportunidades de lucro garantido no mercado de gols.</p>
        </div>

        <!-- Abas de Navegação -->
        <div class="flex border-b border-gray-700 bg-gray-900/50">
            <button id="tab-scanner" class="tab-btn flex-1 p-4 text-lg font-semibold active">Scanner</button>
            <button id="tab-help" class="tab-btn flex-1 p-4 text-lg font-semibold text-gray-400">Como Usar</button>
        </div>

        <div class="p-6 sm:p-8">
            <!-- Conteúdo do Scanner -->
            <div id="content-scanner" class="tab-content">
                <!-- Entradas de Valor -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                     <div>
                        <label for="betCasaA" class="block mb-2 text-sm font-medium text-gray-300">Valor da Aposta - Casa A (R$)</label>
                        <input type="number" id="betCasaA" placeholder="Ex: 100.00" value="100.00" class="bg-gray-700 border border-gray-600 text-white text-lg rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full p-3 shadow-inner">
                    </div>
                    <div>
                        <label for="betCasaB" class="block mb-2 text-sm font-medium text-gray-300">Valor da Aposta - Casa B (R$)</label>
                        <input type="number" id="betCasaB" placeholder="Ex: 100.00" value="100.00" class="bg-gray-700 border border-gray-600 text-white text-lg rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full p-3 shadow-inner">
                    </div>
                </div>

                <!-- Tabelas de Odds -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Casa A -->
                    <div class="bg-gray-700/40 p-4 rounded-xl">
                        <h3 class="text-2xl font-semibold mb-4 text-center text-white">Casa de Apostas A</h3>
                        <div class="space-y-2">
                            <div class="grid grid-cols-3 gap-2 text-center font-semibold text-gray-400 text-sm">
                                <div>Linha</div>
                                <div>Mais de</div>
                                <div>Menos de</div>
                            </div>
                            <div id="inputsCasaA" class="space-y-2"></div>
                        </div>
                    </div>
                    <!-- Casa B -->
                    <div class="bg-gray-700/40 p-4 rounded-xl">
                        <h3 class="text-2xl font-semibold mb-4 text-center text-white">Casa de Apostas B</h3>
                         <div class="space-y-2">
                            <div class="grid grid-cols-3 gap-2 text-center font-semibold text-gray-400 text-sm">
                                <div>Linha</div>
                                <div>Mais de</div>
                                <div>Menos de</div>
                            </div>
                            <div id="inputsCasaB" class="space-y-2"></div>
                        </div>
                    </div>
                </div>

                <div class="mt-8"><button id="calculateScannerBtn" class="w-full text-white bg-purple-600 hover:bg-purple-700 focus:ring-4 focus:outline-none focus:ring-purple-800 font-bold rounded-lg text-lg px-5 py-4 text-center transition-all duration-300 ease-in-out transform hover:scale-105">Escanear Oportunidades de Lucro</button></div>
                <div id="resultScanner" class="mt-8"></div>
            </div>
            
            <!-- Conteúdo da Ajuda -->
            <div id="content-help" class="tab-content hidden leading-relaxed">
                <h2 class="text-2xl font-bold text-purple-400 mb-4">Guia Rápido do Scanner</h2>
                <p class="text-gray-300 mb-6">Esta ferramenta foi projetada para encontrar "middles perfeitos", que são oportunidades onde você tem um lucro garantido, não importa o resultado do jogo.</p>

                <ol class="list-decimal list-inside space-y-4 text-gray-300">
                    <li>
                        <strong>Defina os Valores:</strong> Nos campos "Valor da Aposta", insira quanto do seu saldo de cada casa você deseja usar na operação. O sistema somará os dois para calcular o investimento total.
                    </li>
                    <li>
                        <strong>Preencha as Odds:</strong> Para um mesmo jogo, preencha as tabelas com as odds oferecidas por cada casa de aposta. Você não precisa preencher todas as linhas, apenas as que estiverem disponíveis.
                    </li>
                    <li class="font-bold text-white">
                        <div class="bg-yellow-900/50 border border-yellow-700 text-yellow-300 p-4 rounded-lg">
                            <h3 class="font-bold text-lg mb-2">⚠️ ATENÇÃO: Use PONTO, não vírgula!</h3>
                            <p class="font-normal">Ao inserir as odds, use sempre o ponto como separador decimal. <br>Correto: <code class="bg-gray-700 p-1 rounded">1.85</code> | Incorreto: <code class="bg-gray-700 p-1 rounded">1,85</code></p>
                        </div>
                    </li>
                    <li>
                        <strong>Escanear:</strong> Clique no botão "Escanear Oportunidades de Lucro".
                    </li>
                    <li>
                        <strong>Analisar Resultados:</strong> O sistema irá cruzar todas as odds e mostrar apenas as combinações que garantem lucro em todos os cenários. Ele mostrará o seu lucro mínimo garantido e o lucro máximo se o resultado cair na "janela do middle". Se nenhuma oportunidade for encontrada, ele também avisará.
                    </li>
                </ol>
            </div>
        </div>
    </div>

    <footer class="text-center mt-8"><p class="text-gray-500 text-sm">Developed by Ranieu Sousa</p></footer>

    <script>
        // --- LÓGICA DAS ABAS ---
        const tabScanner = document.getElementById('tab-scanner');
        const tabHelp = document.getElementById('tab-help');
        const contentScanner = document.getElementById('content-scanner');
        const contentHelp = document.getElementById('content-help');

        tabScanner.addEventListener('click', () => {
            tabScanner.classList.add('active');
            tabHelp.classList.remove('active');
            contentScanner.classList.remove('hidden');
            contentHelp.classList.add('hidden');
        });

        tabHelp.addEventListener('click', () => {
            tabHelp.classList.add('active');
            tabScanner.classList.remove('active');
            contentHelp.classList.remove('hidden');
            contentScanner.classList.add('hidden');
        });


        // --- GERAÇÃO DOS INPUTS DINÂMICOS ---
        const lines = [0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5];
        const inputsCasaA = document.getElementById('inputsCasaA');
        const inputsCasaB = document.getElementById('inputsCasaB');

        lines.forEach(line => {
            const lineId = line.toString().replace('.', '_');
            // Inputs para Casa A
            inputsCasaA.innerHTML += `
                <div class="grid grid-cols-3 gap-2 items-center">
                    <div class="bg-gray-800 text-gray-300 text-center py-2.5 rounded-lg">${line.toFixed(1)}</div>
                    <input type="number" id="casaA_over_${lineId}" step="0.01" placeholder="Odd" class="bg-gray-600 border-gray-500 text-white rounded-lg w-full p-2.5 text-center">
                    <input type="number" id="casaA_under_${lineId}" step="0.01" placeholder="Odd" class="bg-gray-600 border-gray-500 text-white rounded-lg w-full p-2.5 text-center">
                </div>
            `;
            // Inputs para Casa B
            inputsCasaB.innerHTML += `
                <div class="grid grid-cols-3 gap-2 items-center">
                    <div class="bg-gray-800 text-gray-300 text-center py-2.5 rounded-lg">${line.toFixed(1)}</div>
                    <input type="number" id="casaB_over_${lineId}" step="0.01" placeholder="Odd" class="bg-gray-600 border-gray-500 text-white rounded-lg w-full p-2.5 text-center">
                    <input type="number" id="casaB_under_${lineId}" step="0.01" placeholder="Odd" class="bg-gray-600 border-gray-500 text-white rounded-lg w-full p-2.5 text-center">
                </div>
            `;
        });
        
        // --- PREENCHIMENTO AUTOMÁTICO DO EXEMPLO ---
        function fillExample() {
            document.getElementById('casaA_over_2_5').value = '2.10';
            document.getElementById('casaB_under_3_5').value = '2.05';
        }
        fillExample();


        // --- LÓGICA DO SCANNER DE MIDDLES ---
        document.getElementById('calculateScannerBtn').addEventListener('click', function() {
            const betCasaA = parseFloat(document.getElementById('betCasaA').value) || 0;
            const betCasaB = parseFloat(document.getElementById('betCasaB').value) || 0;
            const totalBet = betCasaA + betCasaB;
            
            const resultDiv = document.getElementById('resultScanner');
            resultDiv.innerHTML = '';

            if (totalBet <= 0) {
                resultDiv.innerHTML = `<div class="bg-yellow-900/50 border border-yellow-700 text-yellow-300 p-4 rounded-lg text-center">Por favor, preencha os valores da aposta.</div>`;
                return;
            }

            // Função para ler os dados dos inputs
            function getOddsFromInputs(casaId) {
                const oddsData = [];
                lines.forEach(line => {
                    const lineId = line.toString().replace('.', '_');
                    const overOdd = parseFloat(document.getElementById(`${casaId}_over_${lineId}`).value) || 0;
                    const underOdd = parseFloat(document.getElementById(`${casaId}_under_${lineId}`).value) || 0;
                    if (overOdd > 0) {
                        oddsData.push({ type: 'over', line: line, odd: overOdd, casa: casaId === 'casaA' ? 'Casa A' : 'Casa B' });
                    }
                    if (underOdd > 0) {
                        oddsData.push({ type: 'under', line: line, odd: underOdd, casa: casaId === 'casaA' ? 'Casa A' : 'Casa B' });
                    }
                });
                return oddsData;
            }

            const oddsA = getOddsFromInputs('casaA');
            const oddsB = getOddsFromInputs('casaB');
            
            const allOvers = [...oddsA.filter(o => o.type === 'over'), ...oddsB.filter(o => o.type === 'over')];
            const allUnders = [...oddsA.filter(o => o.type === 'under'), ...oddsB.filter(o => o.type === 'under')];

            let profitableMiddles = [];

            // Função para calcular e verificar um middle
            function checkMiddle(overBet, underBet, totalBet) {
                const stakeOver = totalBet * underBet.odd / (overBet.odd + underBet.odd);
                const stakeUnder = totalBet - stakeOver;
                const profitMiddle = (stakeOver * overBet.odd) + (stakeUnder * underBet.odd) - totalBet;
                const controlledLoss = (stakeOver * overBet.odd) - totalBet;

                if (controlledLoss > 0) {
                    profitableMiddles.push({
                        overLine: overBet.line,
                        overOdd: overBet.odd,
                        overCasa: overBet.casa,
                        underLine: underBet.line,
                        underOdd: underBet.odd,
                        underCasa: underBet.casa,
                        stakeOver: stakeOver,
                        stakeUnder: stakeUnder,
                        profitMiddle: profitMiddle,
                        guaranteedProfit: controlledLoss
                    });
                }
            }

            // Cruzamento de todas as odds
            for (const over of allOvers) {
                for (const under of allUnders) {
                    if (under.line > over.line) {
                        checkMiddle(over, under, totalBet);
                    }
                }
            }
            
            profitableMiddles.sort((a, b) => b.guaranteedProfit - a.guaranteedProfit);

            if (profitableMiddles.length > 0) {
                let html = '<h2 class="text-2xl font-bold text-purple-300 text-center mb-6">Oportunidades de Lucro Encontradas!</h2>';
                html += '<div class="space-y-6">';
                profitableMiddles.forEach(middle => {
                    const startMiddle = Math.floor(middle.overLine) + 1;
                    const endMiddle = Math.ceil(middle.underLine) - 1;
                    let middleText = '';
                     if (startMiddle === endMiddle) {
                        middleText = `Exatamente ${startMiddle} gols`;
                    } else {
                        middleText = `Entre ${startMiddle} e ${endMiddle} gols`;
                    }

                    html += `
                        <div class="bg-gray-700/50 border border-gray-600 p-6 rounded-2xl shadow-lg">
                            <div class="mb-4">
                                <p class="text-lg font-semibold text-white">
                                    Janela: <span class="text-purple-300 font-bold">Mais de ${middle.overLine}</span> vs <span class="text-purple-300 font-bold">Menos de ${middle.underLine}</span>
                                </p>
                            </div>
                            <div class="space-y-3 mb-4">
                                <div class="bg-gray-800 p-3 rounded-lg">Aposte <strong class="text-cyan-400">R$ ${middle.stakeOver.toFixed(2)}</strong> em <strong class="text-white">Mais de ${middle.overLine}</strong> na <strong class="text-white">${middle.overCasa}</strong> (Odd ${middle.overOdd.toFixed(2)})</div>
                                <div class="bg-gray-800 p-3 rounded-lg">Aposte <strong class="text-cyan-400">R$ ${middle.stakeUnder.toFixed(2)}</strong> em <strong class="text-white">Menos de ${middle.underLine}</strong> na <strong class="text-white">${middle.underCasa}</strong> (Odd ${middle.underOdd.toFixed(2)})</div>
                            </div>
                            <div class="border-t border-gray-600 pt-4 grid grid-cols-1 sm:grid-cols-2 gap-4 text-center">
                                <div class="bg-green-900/60 p-3 rounded-lg border border-green-700">
                                    <p class="font-bold text-green-300 text-sm">LUCRO MÍNIMO GARANTIDO</p>
                                    <p class="text-xl font-bold text-white mt-1">R$ ${middle.guaranteedProfit.toFixed(2)}</p>
                                </div>
                                <div class="bg-green-900/60 p-3 rounded-lg border border-green-700">
                                    <p class="font-bold text-green-300 text-sm">LUCRO SE ACERTAR (${middleText})</p>
                                    <p class="text-xl font-bold text-white mt-1">R$ ${middle.profitMiddle.toFixed(2)}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
                resultDiv.innerHTML = html;
            } else {
                resultDiv.innerHTML = `<div class="bg-blue-900/50 border border-blue-700 text-blue-300 p-6 rounded-lg text-center"><h3 class="text-xl font-bold mb-2">Nenhuma Oportunidade de Lucro Garantido Encontrada</h3><p>Nenhuma combinação de odds resultou em um "middle perfeito" (lucro em todos os cenários). Tente com outros jogos ou espere as odds mudarem.</p></div>`;
            }
        });
    </script>

</body>
</html>
